<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ServerTest - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Minitest::Test
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-setup">#setup</a>
    
    <li ><a href="#method-i-test_archive">#test_archive</a>
    
    <li ><a href="#method-i-test_backup">#test_backup</a>
    
    <li ><a href="#method-i-test_catch_bind_issue">#test_catch_bind_issue</a>
    
    <li ><a href="#method-i-test_catch_bogus_timeout">#test_catch_bogus_timeout</a>
    
    <li ><a href="#method-i-test_catch_eula_failure">#test_catch_eula_failure</a>
    
    <li ><a href="#method-i-test_catch_normal_execution">#test_catch_normal_execution</a>
    
    <li ><a href="#method-i-test_change_eula_state">#test_change_eula_state</a>
    
    <li ><a href="#method-i-test_check_eula_state">#test_check_eula_state</a>
    
    <li ><a href="#method-i-test_create_from_archive">#test_create_from_archive</a>
    
    <li ><a href="#method-i-test_create_only_missing_server_paths">#test_create_only_missing_server_paths</a>
    
    <li ><a href="#method-i-test_create_server_config">#test_create_server_config</a>
    
    <li ><a href="#method-i-test_create_server_paths">#test_create_server_paths</a>
    
    <li ><a href="#method-i-test_create_server_properties">#test_create_server_properties</a>
    
    <li ><a href="#method-i-test_create_server_via_convenience_method">#test_create_server_via_convenience_method</a>
    
    <li ><a href="#method-i-test_delete_server">#test_delete_server</a>
    
    <li ><a href="#method-i-test_delete_server_paths">#test_delete_server_paths</a>
    
    <li ><a href="#method-i-test_java_jar_start_args_conventional">#test_java_jar_start_args_conventional</a>
    
    <li ><a href="#method-i-test_java_jar_start_args_unconventional">#test_java_jar_start_args_unconventional</a>
    
    <li ><a href="#method-i-test_kill">#test_kill</a>
    
    <li ><a href="#method-i-test_live_directory">#test_live_directory</a>
    
    <li ><a href="#method-i-test_memory_checks">#test_memory_checks</a>
    
    <li ><a href="#method-i-test_modify_attr_from_sc">#test_modify_attr_from_sc</a>
    
    <li ><a href="#method-i-test_modify_sc_without_creating_first">#test_modify_sc_without_creating_first</a>
    
    <li ><a href="#method-i-test_modify_server_properties">#test_modify_server_properties</a>
    
    <li ><a href="#method-i-test_name">#test_name</a>
    
    <li ><a href="#method-i-test_overlay_properties_onto_server_properties">#test_overlay_properties_onto_server_properties</a>
    
    <li ><a href="#method-i-test_parse_stdout">#test_parse_stdout</a>
    
    <li ><a href="#method-i-test_php_phar_start_args">#test_php_phar_start_args</a>
    
    <li ><a href="#method-i-test_pid">#test_pid</a>
    
    <li ><a href="#method-i-test_read_server_properties">#test_read_server_properties</a>
    
    <li ><a href="#method-i-test_restore">#test_restore</a>
    
    <li ><a href="#method-i-test_restore_while_server_running">#test_restore_while_server_running</a>
    
    <li ><a href="#method-i-test_send_test_to_server_console">#test_send_test_to_server_console</a>
    
    <li ><a href="#method-i-test_send_text_to_downed_server">#test_send_text_to_downed_server</a>
    
    <li ><a href="#method-i-test_server_name_is_valid">#test_server_name_is_valid</a>
    
    <li ><a href="#method-i-test_server_start">#test_server_start</a>
    
    <li ><a href="#method-i-test_sleep_until">#test_sleep_until</a>
    
    <li ><a href="#method-i-test_start_server_when_already_running">#test_start_server_when_already_running</a>
    
    <li ><a href="#method-i-test_stop">#test_stop</a>
    
    <li ><a href="#method-i-test_unrecognized_get_start_args_request">#test_unrecognized_get_start_args_request</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ServerTest">
  <h1 id="class-ServerTest" class="class">
    class ServerTest
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-setup" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">setup</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="setup-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 5</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">setup</span>
  <span class="ruby-identifier">@@basedir</span> = <span class="ruby-string">&#39;/var/games/minecraft&#39;</span>
  <span class="ruby-identifier">@@server_jar</span> = <span class="ruby-string">&#39;minecraft_server.1.8.9.jar&#39;</span>
  <span class="ruby-identifier">@@server_jar_path</span> = <span class="ruby-string">&#39;lib/assets/&#39;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">@@server_jar</span>

  <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;fileutils&#39;</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span>(<span class="ruby-identifier">@@basedir</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">@@basedir</span>, <span class="ruby-string">&#39;servers&#39;</span>))
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">@@basedir</span>, <span class="ruby-string">&#39;backup&#39;</span>))
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">@@basedir</span>, <span class="ruby-string">&#39;archive&#39;</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_archive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_archive</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_archive-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 529</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_archive</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:conventional_jar</span>)

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)

  <span class="ruby-identifier">fn</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">archive</span>
  <span class="ruby-identifier">fp</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>], <span class="ruby-identifier">fn</span>)
  <span class="ruby-identifier">assert</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">fp</span>))
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">fn</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;test_&quot;</span>))
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">fn</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;.tgz&quot;</span>))

  <span class="ruby-identifier">require</span>(<span class="ruby-string">&#39;zlib&#39;</span>)
  <span class="ruby-identifier">require</span>(<span class="ruby-string">&#39;archive/tar/minitar&#39;</span>)

  <span class="ruby-identifier">found_files</span> = []

  <span class="ruby-identifier">tgz</span> = <span class="ruby-constant">Zlib</span><span class="ruby-operator">::</span><span class="ruby-constant">GzipReader</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">fp</span>, <span class="ruby-string">&#39;rb&#39;</span>))
  <span class="ruby-identifier">reader</span> = <span class="ruby-constant">Archive</span><span class="ruby-operator">::</span><span class="ruby-constant">Tar</span><span class="ruby-operator">::</span><span class="ruby-constant">Minitar</span><span class="ruby-operator">::</span><span class="ruby-constant">Reader</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">tgz</span>)
  <span class="ruby-identifier">reader</span>.<span class="ruby-identifier">each_entry</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">found_files</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">full_name</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">reader</span>.<span class="ruby-identifier">close</span>
  <span class="ruby-identifier">tgz</span>.<span class="ruby-identifier">close</span>

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">found_files</span>.<span class="ruby-identifier">length</span>, <span class="ruby-value">3</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">found_files</span> <span class="ruby-operator">-</span> [<span class="ruby-string">&#39;./&#39;</span>, <span class="ruby-string">&#39;./server.config&#39;</span>, <span class="ruby-string">&#39;./server.properties&#39;</span>], [])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_backup" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_backup</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_backup-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 588</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_backup</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:conventional_jar</span>)

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">backup</span>

  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;rdiff-backup-data&#39;</span>], <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">entries</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>]) <span class="ruby-operator">-</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">entries</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>]))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_catch_bind_issue" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_catch_bind_issue</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_catch_bind_issue-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 716</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_catch_bind_issue</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">accept_eula</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start_catch_errors</span>(<span class="ruby-value">25</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">RuntimeError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
    <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;A fatal error has been detected by the Java Runtime Environment&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
    <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">kill</span>
    <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:done</span>]

  <span class="ruby-identifier">second_inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">accept_eula</span>

  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">start_catch_errors</span>(<span class="ruby-value">25</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;server port is already in use&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">pid</span>
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:bind</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;FAILED TO BIND TO PORT!&#39;</span>))

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">kill</span>
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_catch_bogus_timeout" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_catch_bogus_timeout</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_catch_bogus_timeout-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 791</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_catch_bogus_timeout</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">accept_eula</span>

  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start_catch_errors</span>(<span class="ruby-string">&#39;x&#39;</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;timeout must be a positive integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start_catch_errors</span>(<span class="ruby-value">:hello</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;timeout must be a positive integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start_catch_errors</span>([]) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;timeout must be a positive integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start_catch_errors</span>(<span class="ruby-value">1.0</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;timeout must be a positive integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start_catch_errors</span>({}) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;timeout must be a positive integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_catch_eula_failure" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_catch_eula_failure</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_catch_eula_failure-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 698</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_catch_eula_failure</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)

  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start_catch_errors</span> }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;you need to agree to the eula in order to run the server&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:eula</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;Failed to load eula.txt&#39;</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_catch_normal_execution" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_catch_normal_execution</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_catch_normal_execution-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 758</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_catch_normal_execution</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">accept_eula</span>

  <span class="ruby-identifier">last_state</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start_catch_errors</span>(<span class="ruby-value">20</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">:done</span>, <span class="ruby-identifier">last_state</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">stop</span>

  <span class="ruby-identifier">second_inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test_two&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">accept_eula</span>
  <span class="ruby-identifier">last_state</span> = <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">start_catch_errors</span>(<span class="ruby-value">8</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">:level</span>, <span class="ruby-identifier">last_state</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">kill</span>
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">pid</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_change_eula_state" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_change_eula_state</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_change_eula_state-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_change_eula_state</span>
  <span class="ruby-identifier">require</span>(<span class="ruby-string">&#39;fileutils&#39;</span>)

  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">eula_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&quot;lib/assets/eula.txt&quot;</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">eula_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">accept_eula</span>
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">true</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">eula</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_check_eula_state" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_check_eula_state</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_check_eula_state-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 145</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_check_eula_state</span>
  <span class="ruby-identifier">require</span>(<span class="ruby-string">&#39;fileutils&#39;</span>)

  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">eula_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&quot;lib/assets/eula.txt&quot;</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">eula_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">false</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">eula</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_create_from_archive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_create_from_archive</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_create_from_archive-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 560</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_create_from_archive</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:conventional_jar</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">archive</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">512</span>, <span class="ruby-string">&#39;java&#39;</span>)

  <span class="ruby-identifier">created</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>]) { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">created</span> = <span class="ruby-identifier">file</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">file</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&#39;.&#39;</span>) }
  <span class="ruby-identifier">second_inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test_copy&#39;</span>)
  <span class="ruby-identifier">fp</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>], <span class="ruby-identifier">created</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">create_from_archive</span>(<span class="ruby-identifier">fp</span>)

  <span class="ruby-identifier">assert_empty</span>(<span class="ruby-constant">Dir</span>.<span class="ruby-identifier">entries</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>]) <span class="ruby-operator">-</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">entries</span>(<span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>]))
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">@@server_jar</span>, <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;jarfile&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">384</span>, <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xmx&#39;</span>])

  <span class="ruby-comment">#should fail because existing server.config created and present</span>
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">create_from_archive</span>(<span class="ruby-identifier">fp</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;cannot extract archive over existing server&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-identifier">third_inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;zing&#39;</span>)
  <span class="ruby-identifier">third_inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:conventional_jar</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">third_inst</span>.<span class="ruby-identifier">create_from_archive</span>(<span class="ruby-identifier">fp</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;cannot extract archive over existing server&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_create_only_missing_server_paths" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_create_only_missing_server_paths</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_create_only_missing_server_paths-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 55</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_create_only_missing_server_paths</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>]
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>]
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_create_server_config" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_create_server_config</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_create_server_config-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_create_server_config</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sc</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sc</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc!</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sc</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_create_server_paths" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_create_server_paths</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_create_server_paths-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_create_server_paths</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_create_server_properties" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_create_server_properties</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_create_server_properties-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_create_server_properties</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sp</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sp</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp!</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sp</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_create_server_via_convenience_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_create_server_via_convenience_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_create_server_via_convenience_method-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 491</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_create_server_via_convenience_method</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:conventional_jar</span>)

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">:conventional_jar</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">server_type</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sp</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sc</span>])

  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test2&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:unconventional_jar</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">:unconventional_jar</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">server_type</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sp</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sc</span>])
  
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test3&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:phar</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">:phar</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">server_type</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sp</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sc</span>])

  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test4&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:bogus</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;unrecognized server type: bogus&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
  
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test5&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:bogus_again</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;unrecognized server type: bogus_again&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_delete_server" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_delete_server</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_delete_server-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 66</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_delete_server</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:conventional_jar</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">delete</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])

  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test2&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:conventional_jar</span>)

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">pid</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>

  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">pid</span>)

  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">delete</span> }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;cannot delete a server that is running&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">delete</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_delete_server_paths" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_delete_server_paths</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_delete_server_paths-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_delete_server_paths</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">delete_paths</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_java_jar_start_args_conventional" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_java_jar_start_args_conventional</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_java_jar_start_args_conventional-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 236</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_java_jar_start_args_conventional</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-comment">#missing jarfile &lt;-- , xmx</span>
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;no runnable jarfile selected&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#missing xmx</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-string">&#39;mc.jar&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;missing java argument: Xmx&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#string as xmx</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-string">&#39;hello&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;invalid java argument: Xmx must be an integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#string as xms</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">128</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-string">&#39;hello&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;invalid java argument: Xms must be unset or an integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#invalid xmx</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">0</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">0</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;invalid java argument: Xmx must be an integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">1024</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/java&#39;</span>, <span class="ruby-string">&#39;-server&#39;</span>, <span class="ruby-string">&#39;-Xmx1024M&#39;</span>, <span class="ruby-string">&#39;-Xms1024M&#39;</span>, <span class="ruby-string">&#39;-jar&#39;</span>, <span class="ruby-string">&#39;mc.jar&#39;</span>, <span class="ruby-string">&#39;nogui&#39;</span> ],
               <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>))

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">768</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/java&#39;</span>, <span class="ruby-string">&#39;-server&#39;</span>, <span class="ruby-string">&#39;-Xmx1024M&#39;</span>, <span class="ruby-string">&#39;-Xms768M&#39;</span>, <span class="ruby-string">&#39;-jar&#39;</span>, <span class="ruby-string">&#39;mc.jar&#39;</span>, <span class="ruby-string">&#39;nogui&#39;</span> ],
               <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>))

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_tweaks&#39;</span>, <span class="ruby-string">&#39;-Xmn256M&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/java&#39;</span>, <span class="ruby-string">&#39;-server&#39;</span>, <span class="ruby-string">&#39;-Xmx1024M&#39;</span>, <span class="ruby-string">&#39;-Xms768M&#39;</span>, <span class="ruby-string">&#39;-Xmn256M&#39;</span>, <span class="ruby-string">&#39;-jar&#39;</span>, <span class="ruby-string">&#39;mc.jar&#39;</span>, <span class="ruby-string">&#39;nogui&#39;</span> ],
               <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>))

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jar_args&#39;</span>, <span class="ruby-string">&#39;dostuff&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/java&#39;</span>, <span class="ruby-string">&#39;-server&#39;</span>, <span class="ruby-string">&#39;-Xmx1024M&#39;</span>, <span class="ruby-string">&#39;-Xms768M&#39;</span>, <span class="ruby-string">&#39;-Xmn256M&#39;</span>, <span class="ruby-string">&#39;-jar&#39;</span>, <span class="ruby-string">&#39;mc.jar&#39;</span>, <span class="ruby-string">&#39;dostuff&#39;</span> ],
               <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>))

  <span class="ruby-comment">#xmx &lt; xms</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">768</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;invalid java argument: Xmx must be &gt; Xms&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#xms == 0</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">1024</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">0</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/java&#39;</span>, <span class="ruby-string">&#39;-server&#39;</span>, <span class="ruby-string">&#39;-Xmx1024M&#39;</span>, <span class="ruby-string">&#39;-Xms1024M&#39;</span>, <span class="ruby-string">&#39;-Xmn256M&#39;</span>, <span class="ruby-string">&#39;-jar&#39;</span>, <span class="ruby-string">&#39;mc.jar&#39;</span>, <span class="ruby-string">&#39;dostuff&#39;</span> ],
               <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:conventional_jar</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_java_jar_start_args_unconventional" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_java_jar_start_args_unconventional</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_java_jar_start_args_unconventional-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_java_jar_start_args_unconventional</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-comment">#missing jarfile</span>
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:unconventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;no runnable jarfile selected&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#invalid xmx</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-string">&#39;mc.jar&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">-1024</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:unconventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;invalid java argument: Xmx must be unset or &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#invalid xms</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">1024</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">-1024</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:unconventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;invalid java argument: Xms must be unset or &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">0</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">0</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_tweaks&#39;</span>, <span class="ruby-string">&#39;-Xmn256M&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/java&#39;</span>, <span class="ruby-string">&#39;-server&#39;</span>, <span class="ruby-string">&#39;-Xmn256M&#39;</span>, <span class="ruby-string">&#39;-jar&#39;</span>, <span class="ruby-string">&#39;mc.jar&#39;</span> ],
               <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:unconventional_jar</span>))

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/java&#39;</span>, <span class="ruby-string">&#39;-server&#39;</span>, <span class="ruby-string">&#39;-Xmx256M&#39;</span>, <span class="ruby-string">&#39;-Xmn256M&#39;</span>, <span class="ruby-string">&#39;-jar&#39;</span>, <span class="ruby-string">&#39;mc.jar&#39;</span> ],
               <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:unconventional_jar</span>))

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jar_args&#39;</span>, <span class="ruby-string">&#39;dostuff&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/java&#39;</span>, <span class="ruby-string">&#39;-server&#39;</span>, <span class="ruby-string">&#39;-Xmx256M&#39;</span>, <span class="ruby-string">&#39;-Xmn256M&#39;</span>, <span class="ruby-string">&#39;-jar&#39;</span>, <span class="ruby-string">&#39;mc.jar&#39;</span>, <span class="ruby-string">&#39;dostuff&#39;</span> ],
               <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:unconventional_jar</span>))

  <span class="ruby-comment">#string as xmx</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-string">&#39;hello&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:unconventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;invalid java argument: Xmx must be unset or an integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#string as xms</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">0</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-string">&#39;hello&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:unconventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;invalid java argument: Xms must be unset or an integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#set xms, unset xmx</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">0</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:unconventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;invalid java argument: Xms may not be set without Xmx&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#xms &gt; xmx</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">128</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:unconventional_jar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;invalid java argument: Xmx may not be lower than Xms&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_kill" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_kill</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_kill-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 815</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_kill</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">accept_eula</span>

  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">kill</span> }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;cannot kill server while it is stopped&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:done</span>]
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">kill</span> <span class="ruby-comment">#sigterm</span>
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>.<span class="ruby-identifier">nil?</span>)

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:done</span>]
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">kill</span>(<span class="ruby-value">:sigterm</span>)
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>.<span class="ruby-identifier">nil?</span>)

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:done</span>]
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">kill</span>(<span class="ruby-value">:sigkill</span>)
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>.<span class="ruby-identifier">nil?</span>)

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:done</span>]
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">kill</span>(<span class="ruby-value">:sigint</span>)
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>.<span class="ruby-identifier">nil?</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_live_directory" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_live_directory</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_live_directory-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 32</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_live_directory</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">@@basedir</span>, <span class="ruby-string">&#39;servers/test&#39;</span>), <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">@@basedir</span>, <span class="ruby-string">&#39;backup/test&#39;</span>), <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">@@basedir</span>, <span class="ruby-string">&#39;archive/test&#39;</span>), <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])

  <span class="ruby-identifier">inst2</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test2&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">@@basedir</span>, <span class="ruby-string">&#39;servers/test2&#39;</span>), <span class="ruby-identifier">inst2</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">@@basedir</span>, <span class="ruby-string">&#39;backup/test2&#39;</span>), <span class="ruby-identifier">inst2</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:bwd</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">@@basedir</span>, <span class="ruby-string">&#39;archive/test2&#39;</span>), <span class="ruby-identifier">inst2</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:awd</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_memory_checks" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_memory_checks</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_memory_checks-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 447</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_memory_checks</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">0.0</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">mem</span>[<span class="ruby-value">:kb</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">0.0</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">mem</span>[<span class="ruby-value">:mb</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">0.0</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">mem</span>[<span class="ruby-value">:gb</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">pid</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>

  <span class="ruby-identifier">assert_instance_of</span>(<span class="ruby-constant">Float</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">mem</span>[<span class="ruby-value">:kb</span>])
  <span class="ruby-identifier">assert_instance_of</span>(<span class="ruby-constant">Float</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">mem</span>[<span class="ruby-value">:mb</span>])
  <span class="ruby-identifier">assert_instance_of</span>(<span class="ruby-constant">Float</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">mem</span>[<span class="ruby-value">:gb</span>])

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_modify_attr_from_sc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_modify_attr_from_sc</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_modify_attr_from_sc-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_modify_attr_from_sc</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">assert_empty</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">256</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xmx&#39;</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">256</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xms&#39;</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;start&#39;</span>, <span class="ruby-keyword">false</span>, <span class="ruby-string">&#39;onreboot&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">256</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xmx&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">256</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xms&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">false</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;onreboot&#39;</span>][<span class="ruby-string">&#39;start&#39;</span>])

  <span class="ruby-identifier">require</span>(<span class="ruby-string">&#39;inifile&#39;</span>)
  <span class="ruby-identifier">sc</span> = <span class="ruby-constant">IniFile</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sc</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">256</span>, <span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xmx&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">256</span>, <span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xms&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">false</span>, <span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;onreboot&#39;</span>][<span class="ruby-string">&#39;start&#39;</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_modify_sc_without_creating_first" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_modify_sc_without_creating_first</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_modify_sc_without_creating_first-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_modify_sc_without_creating_first</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">256</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xmx&#39;</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_modify_server_properties" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_modify_server_properties</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_modify_server_properties-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 192</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_modify_server_properties</span>
  <span class="ruby-identifier">require</span>(<span class="ruby-string">&#39;fileutils&#39;</span>)

  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">sp_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&quot;lib/assets/server.properties&quot;</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">sp_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">number_attributes</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">length</span>

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sp</span>(<span class="ruby-string">&#39;server-port&#39;</span>, <span class="ruby-value">25570</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">25570</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;server-port&#39;</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sp</span>(<span class="ruby-string">&#39;enable-rcon&#39;</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">true</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;enable-rcon&#39;</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sp</span>(<span class="ruby-string">&#39;do-awesomeness&#39;</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">true</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;do-awesomeness&#39;</span>])

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">number_attributes</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">length</span>)

  <span class="ruby-identifier">require</span>(<span class="ruby-string">&#39;inifile&#39;</span>)
  <span class="ruby-identifier">sp</span> = <span class="ruby-constant">IniFile</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sp</span>])[<span class="ruby-string">&#39;global&#39;</span>]
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">25570</span>, <span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;server-port&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">true</span>, <span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;enable-rcon&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">true</span>, <span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;do-awesomeness&#39;</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_name</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_name-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 17</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_name</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&#39;test&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_overlay_properties_onto_server_properties" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_overlay_properties_onto_server_properties</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_overlay_properties_onto_server_properties-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_overlay_properties_onto_server_properties</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">overlay_sp</span>({ <span class="ruby-string">&#39;server-port&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">25565</span>,
                    <span class="ruby-string">&#39;difficulty&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>,
                    <span class="ruby-string">&#39;enable-query&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> })
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">25565</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;server-port&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;difficulty&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">false</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;enable-query&#39;</span>])

  <span class="ruby-identifier">require</span>(<span class="ruby-string">&#39;inifile&#39;</span>)
  <span class="ruby-identifier">sp</span> = <span class="ruby-constant">IniFile</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:sp</span>])[<span class="ruby-string">&#39;global&#39;</span>]
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">25565</span>, <span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;server-port&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;difficulty&#39;</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">false</span>, <span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;enable-query&#39;</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_parse_stdout" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_parse_stdout</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_parse_stdout-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 651</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_parse_stdout</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">accept_eula</span>
  <span class="ruby-identifier">pid</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:done</span>]
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">console</span>(<span class="ruby-string">&#39;stop&#39;</span>)
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>

  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:version</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;1.8.9&#39;</span>))
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:type</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;SURVIVAL&#39;</span>))
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:port</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;*:25565&#39;</span>))
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:level</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;&quot;world&quot;&#39;</span>))
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:done</span>].<span class="ruby-identifier">match</span>(<span class="ruby-regexp">/\[Server thread\/INFO\]: Done/</span>))
  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:stopping</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;Stopping server&#39;</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_php_phar_start_args" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_php_phar_start_args</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_php_phar_start_args-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 352</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_php_phar_start_args</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>) 
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-comment">#missing pharfile</span>
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:phar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;no runnable pharfile selected&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-comment">#fallback for backward compat with previous webuis</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-string">&#39;pocket.phar&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/php&#39;</span>, <span class="ruby-string">&#39;pocket.phar&#39;</span>], <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:phar</span>))

  <span class="ruby-comment">#existence of [nonjava][executable] will override</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;executable&#39;</span>, <span class="ruby-string">&#39;pocketmine.phar&#39;</span>, <span class="ruby-string">&#39;nonjava&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/php&#39;</span>, <span class="ruby-string">&#39;pocketmine.phar&#39;</span>], <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:phar</span>))

  <span class="ruby-comment">#empty executable should fallback</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;executable&#39;</span>, <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-string">&#39;nonjava&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>([<span class="ruby-string">&#39;/usr/bin/php&#39;</span>, <span class="ruby-string">&#39;pocket.phar&#39;</span>], <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:phar</span>))

  <span class="ruby-comment">#empty jarfile should error out</span>
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:phar</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;no runnable pharfile selected&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_pid" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_pid</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_pid-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 470</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_pid</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>.<span class="ruby-identifier">nil?</span>)

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">pid</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">pid</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>)
  <span class="ruby-identifier">assert_instance_of</span>(<span class="ruby-constant">Fixnum</span>, <span class="ruby-identifier">pid</span>)
  <span class="ruby-identifier">assert_instance_of</span>(<span class="ruby-constant">Fixnum</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>)

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_read_server_properties" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_read_server_properties</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_read_server_properties-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 178</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_read_server_properties</span>
  <span class="ruby-identifier">require</span>(<span class="ruby-string">&#39;fileutils&#39;</span>)

  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>
  <span class="ruby-identifier">sp_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&quot;lib/assets/server.properties&quot;</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">sp_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">25565</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;server-port&#39;</span>])
  <span class="ruby-identifier">assert_empty</span>(<span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;server-ip&#39;</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;enable-rcon&#39;</span>]
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sp</span>[<span class="ruby-string">&#39;enable-query&#39;</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_restore" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_restore</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_restore-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 601</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_restore</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:conventional_jar</span>)

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">backup</span>

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">1024</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">sleep</span>(<span class="ruby-value">1.2</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">backup</span>
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1024</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xmx&#39;</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">restore</span>(<span class="ruby-string">&#39;1B&#39;</span>)
  <span class="ruby-comment">#current implementation makes outside changes to sc not recognized until re-loaded.</span>
  <span class="ruby-comment">#re-instantiation isn&#39;t good, and should be removed in the future</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">384</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xmx&#39;</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">restore</span>(<span class="ruby-string">&#39;5B&#39;</span>)
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">384</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xmx&#39;</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">restore</span>(<span class="ruby-string">&#39;0B&#39;</span>)
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1024</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sc</span>[<span class="ruby-string">&#39;java&#39;</span>][<span class="ruby-string">&#39;java_xmx&#39;</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_restore_while_server_running" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_restore_while_server_running</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_restore_while_server_running-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 632</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_restore_while_server_running</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:conventional_jar</span>)

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">backup</span>

  <span class="ruby-identifier">pid</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">restore</span>(<span class="ruby-string">&#39;1B&#39;</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;cannot restore server while it is running&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_send_test_to_server_console" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_send_test_to_server_console</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_send_test_to_server_console-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 423</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_send_test_to_server_console</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">accept_eula</span>
  <span class="ruby-identifier">pid</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:done</span>]
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">console</span>(<span class="ruby-string">&#39;stop&#39;</span>)
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_send_text_to_downed_server" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_send_text_to_downed_server</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_send_text_to_downed_server-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 441</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_send_text_to_downed_server</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">IOError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">console</span>(<span class="ruby-string">&#39;hello&#39;</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;I/O channel is down&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_server_name_is_valid" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_server_name_is_valid</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_server_name_is_valid-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 22</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_server_name_is_valid</span>
  [<span class="ruby-string">&#39;test&#39;</span>, <span class="ruby-string">&#39;asdf1234&#39;</span>, <span class="ruby-string">&#39;hello_is_it_me&#39;</span>, <span class="ruby-string">&#39;1.7.10&#39;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">end</span>
  [<span class="ruby-string">&#39;.test&#39;</span>, <span class="ruby-string">&#39;#test&#39;</span>, <span class="ruby-string">&#39;?test&#39;</span>, <span class="ruby-string">&#39;!test&#39;</span>, <span class="ruby-string">&#39;server\s&#39;</span>, <span class="ruby-string">&#39;test^again&#39;</span>, <span class="ruby-string">&#39;Vanilla-1.8.9&#39;</span>, <span class="ruby-string">&#39;feed me&#39;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>) }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_server_start" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_server_start</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_server_start-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 386</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_server_start</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">pid</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>
  
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-constant">Process</span>.<span class="ruby-identifier">kill</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">pid</span>))
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword">false</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">eula</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_sleep_until" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_sleep_until</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_sleep_until-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 851</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_sleep_until</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">accept_eula</span>

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-identifier">assert</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:done</span>])
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sleep_until</span>(<span class="ruby-value">:done</span>)

  <span class="ruby-constant">Process</span>.<span class="ruby-identifier">kill</span>(<span class="ruby-value">9</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sleep_until</span>(<span class="ruby-value">:down</span>)
  <span class="ruby-identifier">assert</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sleep_until</span>(<span class="ruby-value">:down</span>)

  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sleep_until</span>(<span class="ruby-value">:down</span>, <span class="ruby-string">&#39;x&#39;</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;timeout must be a positive integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sleep_until</span>(<span class="ruby-value">:down</span>, <span class="ruby-value">:hello</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;timeout must be a positive integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sleep_until</span>(<span class="ruby-value">:down</span>, []) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;timeout must be a positive integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sleep_until</span>(<span class="ruby-value">:down</span>, <span class="ruby-value">1.0</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;timeout must be a positive integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">sleep_until</span>(<span class="ruby-value">:down</span>, {}) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;timeout must be a positive integer &gt; 0&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-identifier">second_inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test_two&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)

  <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">start</span> <span class="ruby-comment">#these should fail because of eula</span>
  <span class="ruby-identifier">assert</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">status</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:done</span>))

  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">sleep_until</span>(<span class="ruby-value">:done</span>, <span class="ruby-value">2</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;condition not satisfied in allowed time&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">second_inst</span>.<span class="ruby-identifier">pid</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_start_server_when_already_running" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_start_server_when_already_running</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_start_server_when_already_running-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 403</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_start_server_when_already_running</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">pid</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>

  <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">pid</span>)

  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span> }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;server is already running&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_stop" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_stop</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_stop-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 676</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_stop</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">create_paths</span>

  <span class="ruby-identifier">jar_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">@@server_jar_path</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">jar_path</span>, <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value">:cwd</span>])

  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;jarfile&#39;</span>, <span class="ruby-identifier">@@server_jar</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xmx&#39;</span>, <span class="ruby-value">384</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">modify_sc</span>(<span class="ruby-string">&#39;java_xms&#39;</span>, <span class="ruby-value">256</span>, <span class="ruby-string">&#39;java&#39;</span>)
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">accept_eula</span>

  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">stop</span> }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;cannot stop server while it is stopped&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)

  <span class="ruby-identifier">pid</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">start</span>

  <span class="ruby-keyword">nil</span> <span class="ruby-keyword">until</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">status</span>[<span class="ruby-value">:done</span>]
  <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">stop</span>
  <span class="ruby-identifier">assert</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">inst</span>.<span class="ruby-identifier">pid</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_unrecognized_get_start_args_request" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_unrecognized_get_start_args_request</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_unrecognized_get_start_args_request-source">
            <pre><span class="ruby-comment"># File test/models/server_test.rb, line 378</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_unrecognized_get_start_args_request</span>
  <span class="ruby-identifier">inst</span> = <span class="ruby-constant">Server</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;test&#39;</span>) 
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NotImplementedError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:bogus</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;unrecognized get_start_args argument: bogus&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
  <span class="ruby-identifier">ex</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NotImplementedError</span>) { <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">get_start_args</span>(<span class="ruby-value">:more_bogus</span>) }
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&#39;unrecognized get_start_args argument: more_bogus&#39;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

